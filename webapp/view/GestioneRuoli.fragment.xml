<core:FragmentDefinition xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:unified="sap.ui.unified">
    <Dialog contentWidth="80%"
        afterClose="afterClose"
        contentHeight="70%"
        titleAlignment="Center">
        <customHeader>
            <Toolbar>
                <Title text="Gestione Ruoli" />
                <ToolbarSpacer />
                <Button icon="sap-icon://decline"
                    type="Emphasized"
                    press="closeDialog" />
            </Toolbar>
        </customHeader>
        <!-- <App id="fcl" > -->
        <!-- <Page title="GESTIONE RUOLI"
            showHeader="true"
            navButtonPress="navPagPrec"
            showNavButton="true">
            <headerContent>
                <Image src="../public/logo.jpg"
                    height="22.00000000px"
                    width="100px"
                    visible="true"
                    tooltip="Share" />
            </headerContent>
-->
        <subHeader>
            <OverflowToolbar>
                <SearchField liveChange=".onSearchField" placeholder="Cerca utente"
                    width="80%" />
            </OverflowToolbar>
        </subHeader>


        <Table mode="MultiSelect"
            id="tableUser"
            items="{
            templateShareable: false,
            path: 'modelloListaUtenti>/utenti',
            grouped: true,
            sorter: {
                path: 'nome',  
                descending: false,
                group: '.getGroup'
            },
            groupHeaderFactory: '.getGroupHeader'
        }"
            class="tableProcessate">
            <headerToolbar>
                <OverflowToolbar>
                    <content>
                        <ToolbarSpacer />
                        <Button text="Aggiungi"
                            type="Emphasized"
                            press="addUser"
                            icon="sap-icon://add-employee" />
                        <Button text="Elimina"
                            press="deleteUser"
                            type="Neutral"
                            icon="sap-icon://delete" />
                    </content>
                </OverflowToolbar>
            </headerToolbar>

            <columns>
                <Column>
                    <Text text="Nome" />
                </Column>
                <Column>
                    <Text text="Email" />
                </Column>
                <Column>
                    <Text text="Ruoli" />
                </Column>

            </columns>
            <items>
                <ColumnListItem vAlign="Middle">
                    <cells>
                        <Text text="{modelloListaUtenti>nome}" />
                        <Input value="{modelloListaUtenti>email}"
                            width="50%" />
                        <ComboBox selectedKey="{modelloListaUtenti>ruolo}"
                            width="70%"
                            items="{
                            templateShareable: true,
                            path: 'modelloGestioneRuoli>/listaRuoli',
                            sorter: { path: 'nome' }
                        }">

                            <core:Item key="{modelloGestioneRuoli>nome}"
                                text="{modelloGestioneRuoli>nome}" />

                        </ComboBox>
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
        <footer>
            <OverflowToolbar>
                <ToolbarSpacer />
                <FlexBox justifyContent="End">
                    <Button press="onSaveChangeUser"
                        text="Salva"
                        type="Emphasized" />
                    <ToolbarSpacer />
                </FlexBox>
            </OverflowToolbar>
        </footer>
    </Dialog>

    <!-- </Page> -->
    <!-- </App> -->
</core:FragmentDefinition>